{#
  Copyright (C) 2020 CERN.
  Copyright (C) 2020 Northwestern University.

  Invenio App RDM is free software; you can redistribute it and/or modify it
  under the terms of the MIT License; see LICENSE file for more details.
#}
{%- set title = _("Uploads") %}
{%- extends "invenio_app_rdm/users/base.html" %}

{% set active_dashboard_menu_item = 'uploads' %}

{%- block javascript %}
{{ super() }}
{{ webpack['invenio-app-rdm-user-uploads.js'] }}
<script>
  // Set NYU Open Data as the default community for uploads on the deposit form.
  // This is a temporary workaround until we have a better solution.
  // See: https://jira.nyu.edu/browse/INVENIO-58
  document.addEventListener('DOMContentLoaded', (event) => {
    const communitySlug = "{{ config.DEFAULT_COMMUNITY }}"
    const matches = document.querySelectorAll("a[href='/uploads/new']")
    matches.forEach(match => {
      match.setAttribute('href', `/uploads/new?community=${communitySlug}`)
    })
  })
</script>
{%- endblock javascript %}

{%- block user_dashboard_body %}
  <div
    id="invenio-search-config"
    data-invenio-search-config='{{ search_app_rdm_user_uploads_config(app_id="InvenioAppRdm.DashboardUploads") | tojson }}'
  >
</div>
{%- endblock user_dashboard_body %}
